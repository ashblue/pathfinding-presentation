<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>A* Pathfinding for JavaScript</title>

		<meta name="description" content="An overview of how A* pathfinding works and how to implement it into any JavaScript project">
		<meta name="author" content="Ash Blue">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/solarized.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>A* Pathfinding</h1>
					<h3>For JavaScript and Beyond</h3>
					<p>
						<small>
                            By <a href="http://blueashes.com">Ash Blue</a> /
                            <a href="http://clevercg.com">Clever Crow Games</a> /
                            <a href="http://www.manning.com/crowther2/">HTML5 in Action</a> /
                            <a href="http://twitter.com/ashbluewd">@ashbluewd</a>
                        </small>
					</p>
				</section>

                <section>
                    <section>
                        <h2>What is AI pathfinding?</h2>
                        <p>Process of discovering a path through obstacles <br/> between two points</p>

                        <div id="example-path" class="click-animate">
                            <div class="line a"></div>
                            <div class="line b"></div>
                            <div class="line c"></div>

                            <div class="square"></div>
                            <div class="square alt"></div>

                            <div class="circle default"></div>
                            <div class="circle main"></div>
                            <div class="circle alt"></div>

                        </div>
                    </section>

                    <section>
                        <h2>Just for games?</h2>
                        <p>No! Pathfinding is important for building complex HTML5 apps</p>

                        <div class="img-caption">
                            <img width="300" height="300" src="assets/google-maps.jpg" />
                            <span style="max-width: 300px;">Fastest Route</span>
                        </div>

                        <div class="img-caption">
                            <img width="300" height="300" src="assets/get-resources.jpg" />
                            <span style="max-width: 300px;">Acquire Resources</span>
                        </div>

                        <div class="img-caption">
                            <img width="300" height="300" src="assets/robotics-engineering.jpg" />
                            <span style="max-width: 300px;">Robotics Engineering</span>
                        </div>
                    </section>
                </section>

				<section>
                    <section>
                        <h2>Popular Pathfinding Algorithms</h2>
                        <ul>
                            <li>Brute Force</li>
                            <li>Dijkstra</li>
                            <li>A*</li>
                            <li><a href="http://en.wikipedia.org/wiki/Pathfinding">Many others</a></li>
                        </ul>
                    </section>

                    <section>
                        <h2>A* (Golden Solution)</h2>
                        <ul>
                            <li>Customizable</li>
                            <li>Fast</li>
                            <li>Reusable</li>
                            <li>Minimal code</li>
                        </ul>
                    </section>
				</section>

                <section>
                    <section>
                        <h2>A* In Action</h2>

                        <p>Get our hero to the treasure with the shortest path</p>
                        <small>(click to move)</small>

                        <div class="pathfinder">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2>Break Map Into Voxels</h2>
                        <ul>
                            <li>Use largest blocks possible</li>
                            <li>Small voxels hurt performance</li>
                        </ul>

                        <div class="pathfinder grid">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2>Identify Tile Types</h2>
                        <ul>
                            <li>Identify blockers</li>
                            <li>Get walkable tiles with cost</li>
                            <!-- @TODO Move this into a nice graphic that can be toggled on and off via class on the grid -->
                            <li>Transparent = open, black = blocked, water = blue, start = green, end = red</li>
                        </ul>

                        <div class="pathfinder grid type">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2>Count Steps</h2>
                        <ul>
                            <li>A* steps examines 1 tile at a time with neighbors (step)</li>
                            <li>Lower step count prioritized</li>
                        </ul>

                        <!-- @TODO Include tile direction graphics -->
                        <!-- @TODO Hide open / closed -->
                        <div class="pathfinder history grid type show-step">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2>Distance Heuristics</h2>
                        <ul>
                            <li>Estimates distance to goal</li>
                            <li>Manhattan or Euclidean?</li>
                            <li>Demo uses Manhattan for speed</li>
                        </ul>

                        <pre><code data-trim contenteditable>
function euclidean (xC, yC, xT, yT) {
    var dx = xT - xC, dy = yT - yC;
    return Math.sqrt((dx * dx) + (dy * dy));
}

function manhattan (xC, yC, xT, yT) {
    var dx = Math.abs(xT - xC), dy = Math.abs(yT - yC);
    return dx + dy;
}
                        </code></pre>
                    </section>

                    <section>
                        <h2>Heuristic in Action</h2>

                        <div class="pathfinder history grid type show-heuristic">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2>Open and Closed Sets</h2>
                        <!-- @TODO Highlight open and closed with proper colors -->
                        <ul>
                            <li>Open (green): Yet to be evaluated</li>
                            <li>Closed (red): Evaluated tile</li>
                            <li>A* Always chooses best open</li>
                            <li>Best open found through heuristic + step cost</li>
                        </ul>
                    </section>

                    <section>
                        <h2>Putting Everything Together</h2>

                        <!-- @TODO Activate open and closed here -->
                        <div class="pathfinder history grid type show-stats">
                            <div class="matrix">
                                <div class="row">
                                    <div data-x="0" data-y="0" class="voxel"></div>
                                    <div data-x="1" data-y="0" class="voxel"></div>
                                    <div data-x="2" data-y="0" class="voxel"></div>
                                    <div data-x="3" data-y="0" class="voxel"></div>
                                    <div data-x="4" data-y="0" class="voxel"></div>
                                    <div data-x="5" data-y="0" class="voxel" data-pos="end"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="1" class="voxel"></div>
                                    <div data-x="1" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="1" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="1" class="voxel"></div>
                                    <div data-x="4" data-y="1" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="1" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="2" class="voxel"></div>
                                    <div data-x="1" data-y="2" class="voxel"></div>
                                    <div data-x="2" data-y="2" class="voxel"></div>
                                    <div data-x="3" data-y="2" class="voxel alt" data-cost="0"></div>
                                    <div data-x="4" data-y="2" class="voxel" data-cost="2"></div>
                                    <div data-x="5" data-y="2" class="voxel"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="3" class="voxel alt" data-cost="0"></div>
                                    <div data-x="1" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="2" data-y="3" class="voxel"></div>
                                    <div data-x="3" data-y="3" class="voxel" data-cost="0"></div>
                                    <div data-x="4" data-y="3" class="voxel"></div>
                                    <div data-x="5" data-y="3" class="voxel" data-cost="0"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="4" class="voxel"></div>
                                    <div data-x="1" data-y="4" class="voxel" data-pos="start"><span class="player"></span></div>
                                    <div data-x="2" data-y="4" class="voxel"></div>
                                    <div data-x="3" data-y="4" class="voxel"></div>
                                    <div data-x="4" data-y="4" class="voxel"></div>
                                    <div data-x="5" data-y="4" class="voxel" data-cost="2"></div>
                                </div>

                                <div class="row">
                                    <div data-x="0" data-y="5" class="voxel"></div>
                                    <div data-x="1" data-y="5" class="voxel"></div>
                                    <div data-x="2" data-y="5" class="voxel" data-cost="0"></div>
                                    <div data-x="3" data-y="5" class="voxel"></div>
                                    <div data-x="4" data-y="5" class="voxel"></div>
                                    <div data-x="5" data-y="5" class="voxel"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Map API</h2>
                        <ul>
                            <li>Abstracts map data from pathfinder</li>
                            <li>Most A* customization happens here</li>
                            <li>Using John Resig's <a href="http://ejohn.org/blog/simple-javascript-inheritance/">Simple JavaScript Inheritance</a> for instances</li>
                        </ul>

                        <h3>Primary Methods</h3>
                        <ol>
                            <li>setMap</li>
                            <li>outOfBounds</li>
                            <li>getNeighbors</li>
                        </ol>
                    </section>

                    <section>
                        <h2>setMap</h2>
                        <ul>
                            <li>Break map down to voxels</li>
                            <li>HTML/CSS users loop through data via jQuery</li>
                            <li>Complex games require multiple maps (collision, entities, other)</li>
                        </ul>

                        <p>Image of demo map pointing to an array of equivalent data</p>

<pre><code data-trim>
window.Map = window.Class.extend({
    init: function (mapData) {
        this.mapData = mapData;
    },
    ...
});
</code></pre>
                    </section>

                    <section>
                        <h2>OutOfBounds</h2>
                        <ul>
                            <li>Check for overflowing indices on map data</li>
                            <li>Prevents errors from crashing the app</li>
                        </ul>

<pre><code data-trim>
window.Map = window.Class.extend({
    ...
    outOfBounds: function (x, y) {
        return x < 0 || x >= this.data[0].length ||
        y < 0 || y >= this.data.length;
    },
    ...
});
</code></pre>
                    </section>

                    <section>
                        <h2>GetNeighbors</h2>
                        <ul>
                            <li>Find all open adjacent tiles</li>
                            <li>Tweak for diagonal by returning corners here</li>
                            <li>Add 3D z-index by returning tiles above and below</li>
                        </ul>

<pre><code data-trim>
window.Map = window.Class.extend({
    ...
    getNeighbors: function (x, y) {
        var neighbors = [];

        // Check top, right, bottom, left (clockwise)
        if (!this.blocked(x, y - 1)) neighbors.push(new window.Tile(x, y - 1));
        if (!this.blocked(x + 1, y)) neighbors.push(new window.Tile(x + 1, y));
        if (!this.blocked(x, y + 1)) neighbors.push(new window.Tile(x, y + 1));
        if (!this.blocked(x - 1, y)) neighbors.push(new window.Tile(x - 1, y));

        return neighbors;
    },
    ...
});
</code></pre>
                    </section>

                    <section>
                        <h2>Completed Map</h2>

                        <pre><code data-trim>
window.Map = window.Class.extend({
    data: null, // Current map

    init: function (data) {
        this.data = data;
    },

    outOfBounds: function (x, y) {
        return x < 0 || x >= this.data[0].length ||
            y < 0 || y >= this.data.length;
    },

    getWidthInTiles: function () {
        return this.data[0].length;
    },

    getHeightInTiles: function () {
        return this.data.length;
    },

    blocked: function (x, y) {
        if (this.outOfBounds(x, y)) {
            return true;
        }

        if (this.data[y][x] === 0) {
            return true;
        }

        return false;
    },

    getNeighbors: function (x, y) {
        var neighbors = [];

        if (!this.blocked(x, y - 1)) neighbors.push(new window.Tile(x, y - 1));
        if (!this.blocked(x + 1, y)) neighbors.push(new window.Tile(x + 1, y));
        if (!this.blocked(x, y + 1)) neighbors.push(new window.Tile(x, y + 1));
        if (!this.blocked(x - 1, y)) neighbors.push(new window.Tile(x - 1, y));

        return neighbors;
    },


    getCost: function (xC, yC, xT, yT) {
        return this.data[yT][xT];
    }
});
                        </code></pre>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Pathfinder API</h2>
                        <ul>
                            <li>Navigates through map data</li>
                            <li>Each creature will need its own pathfinder</li>
                            <li>Returns a completed path that can be navigated</li>
                        </ul>

                        <h3>Primary Topics</h3>
                        <ol>
                            <li>Close commands</li>
                            <li>Open commands</li>
                            <li>findPath Walkthrough</li>
                            <li>Assembling a path</li>
                        </ol>
                    </section>

                    <section>
                        <h2>Close Commands</h2>

                        <p>Simple interface to manage adding and removing closed tiles</p>

                        <pre><code data-trim>
window.PathFinder = window.Class.extend({
    ...
    // New closed tile
    addClosed: function (step) {
        this.addHistory(step, 'closed');
        this.closed.push(step);
        return this;
    },

    // Remove existing closed tile
    inClosed: function (step) {
        for (var i = 0; i < this.closed.length; i++) {
            if (this.closed[i].x === step.x && this.closed[i].y === step.y)
                return this.closed[i];
        }

        return false;
    },
    ...
});
                        </code></pre>
                    </section>

                    <section>
                        <h2>Open Commands</h2>

                        <p>Used to store and analyze group data</p>

                        <pre><code data-trim>
window.PathFinder = window.Class.extend({
    ...
    // Adds a new tile
    addOpen: function (step) {
        this.open.push(step);
        return this;
    },

    // Removes an existing tile
    removeOpen: function (step) {
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i] === step) this.open.splice(i, 1);
        }
        return this;
    },

    // Check if the step is already in the open set
    inOpen: function (step) {
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i].x === step.x && this.open[i].y === step.y)
                return this.open[i];
        }

        return false;
    },

    // Get the best possible tile from the open set
    getBestOpen: function () {
        var bestI = 0;
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i].f < this.open[bestI].f) bestI = i;
        }

        return this.open[bestI];
    },
    ...
});
                        </code></pre>
                    </section>

                    <section>
                        <h2>findPath Walkthrough</h2>

                        <p>This walks through the map API data finds a walkable path</p>

                        <pre><code data-trim>
window.PathFinder = window.Class.extend({
    ...
    findPath: function (xC, yC, xT, yT) {
        var current, // Current best open tile
            neighbors, // Dump of all nearby neighbor tiles
            neighborRecord, // Any pre-existing records of a neighbor
            stepCost, // Dump of a total step score for a neighbor
            i;

        // You must add the starting step
        this.reset()
            .addOpen(new window.Step(xC, yC, xT, yT, this.step, false));

        while (this.open.length !== 0) {
            this.step++;
            current = this.getBestOpen();

            // Check if goal has been discovered to build a path
            if (current.x === xT && current.y === yT) {
                return this.buildPath(current, []);
            }

            // Move current into closed set
            this.removeOpen(current)
                .addClosed(current);

            // Get neighbors from the map and check them
            neighbors = this.map.getNeighbors(current.x, current.y);
            for (i = 0; i < neighbors.length; i++) {
                this.step++;

                // Get current step and distance from current to neighbor
                stepCost = current.g + this.map.getCost(current.x, current.y, neighbors[i].x, neighbors[i].y);

                // Check for the neighbor in the closed set
                // then see if its cost is >= the stepCost, if so skip current neighbor
                neighborRecord = this.inClosed(neighbors[i]);
                if (neighborRecord && stepCost >= neighborRecord.g)
                    continue;

                // Verify neighbor doesn't exist or new score for it is better
                neighborRecord = this.inOpen(neighbors[i]);
                if (!neighborRecord || stepCost < neighborRecord.g) {
                    if (!neighborRecord) {
                        this.addOpen(new window.Step(neighbors[i].x, neighbors[i].y, xT, yT, stepCost, current));
                    } else {
                        neighborRecord.parent = current;
                        neighborRecord.g = stepCost;
                        neighborRecord.f = stepCost + neighborRecord.h;
                    }
                }
            }
        }

        return false;
    },
    ...
});
                        </code></pre>
                    </section>

                    <section>
                        <h2>Assembling a path</h2>

                        <p>Put together a walkable path from the <em>findPath</em> method's closed set data</p>

                        <pre><code data-trim>
window.PathFinder = window.Class.extend({
    ...
    // Recursive path building method
    buildPath: function (tile, stack) {
        stack.push(tile);

        // Look at every parent and step back until no parents are left
        if (tile.parent) {
            return this.buildPath(tile.parent, stack);
        } else {
            return stack;
        }
    },
    ...
});
                        </code></pre>
                    </section>

                    <section>
                        <h2>Completed Pathfinder</h2>

                        <pre><code data-trim>
window.PathFinder = window.Class.extend({
    map: null, // Map class reference
    closed: null, // Taken steps
    open: null, // Available steps that can be taken
    history: null,
    step: 0, // Step count
    maxSearchDistance: 100, // Maximum number of steps that can be taken before shutting down a closed path

    init: function (map) {
        this.closed = [];
        this.open = [];
        this.history = [];
        this.map = map;
    },

    addOpen: function (step) {
        this.addHistory(step, 'open');
        this.open.push(step);
        return this;
    },

    // Remove a step that already exists by object memory address (not actual x and y values)
    removeOpen: function (step) {
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i] === step) this.open.splice(i, 1);
        }
        return this;
    },

    // Check if the step is already in the open set
    inOpen: function (step) {
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i].x === step.x && this.open[i].y === step.y)
                return this.open[i];
        }

        return false;
    },

    // Get the lowest costing tile in the open set
    getBestOpen: function () {
        var bestI = 0;
        for (var i = 0; i < this.open.length; i++) {
            if (this.open[i].f < this.open[bestI].f) bestI = i;
        }

        return this.open[bestI];
    },

    addClosed: function (step) {
        this.addHistory(step, 'closed');
        this.closed.push(step);
        return this;
    },

    // Check if the step is already in the closed set
    inClosed: function (step) {
        for (var i = 0; i < this.closed.length; i++) {
            if (this.closed[i].x === step.x && this.closed[i].y === step.y)
                return this.closed[i];
        }

        return false;
    },

    addHistory: function (step, group) {
        this.history.push({
            step: step,
            group: group
        });
    },

    findPath: function (xC, yC, xT, yT) {
        var current, // Current best open tile
            neighbors, // Dump of all nearby neighbor tiles
            neighborRecord, // Any pre-existing records of a neighbor
            stepCost, // Dump of a total step score for a neighbor
            i;

        // You must add the starting step
        this.reset()
            .addOpen(new window.Step(xC, yC, xT, yT, this.step, false));

        while (this.open.length !== 0) {
            this.step++;
            current = this.getBestOpen();

            // Check if goal has been discovered to build a path
            if (current.x === xT && current.y === yT) {
                return this.buildPath(current, []);
            }

            // Move current into closed set
            this.removeOpen(current)
                .addClosed(current);

            // Get neighbors from the map and check them
            neighbors = this.map.getNeighbors(current.x, current.y);
            for (i = 0; i < neighbors.length; i++) {
                this.step++;

                // Get current step and distance from current to neighbor
                stepCost = current.g + this.map.getCost(current.x, current.y, neighbors[i].x, neighbors[i].y);

                // Check for the neighbor in the closed set
                // then see if its cost is >= the stepCost, if so skip current neighbor
                neighborRecord = this.inClosed(neighbors[i]);
                if (neighborRecord && stepCost >= neighborRecord.g)
                    continue;

                // Verify neighbor doesn't exist or new score for it is better
                neighborRecord = this.inOpen(neighbors[i]);
                if (!neighborRecord || stepCost < neighborRecord.g) {
                    if (!neighborRecord) {
                        this.addOpen(new window.Step(neighbors[i].x, neighbors[i].y, xT, yT, stepCost, current));
                    } else {
                        neighborRecord.parent = current;
                        neighborRecord.g = stepCost;
                        neighborRecord.f = stepCost + neighborRecord.h;
                    }
                }
            }
        }

        return false;
    },

    // Recursive path buliding method
    buildPath: function (tile, stack) {
        stack.push(tile);

        if (tile.parent) {
            return this.buildPath(tile.parent, stack);
        } else {
            return stack;
        }
    },

    reset: function () {
        this.closed = [];
        this.open = [];
        return this;
    }
});
                        </code></pre>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Pathfinding with gravity</h2>

                        <p>For use with platformers and other games requiring gravity</p>

                        <ul>
                            <li>JavaScript library: xxx</li>
                            <li>Currently used for <a href="http://playadnc.com">A Dragon Named Coal's</a> companion system</li>
                        </ul>

                        <p>IMAGE HERE OF PATHFINDING DEBUGGER WITH GRAVITY</p>
                    </section>

                    <section>
                        <h2>Clearance values</h2>

                        <p>For when moving characters takes up more than one tile<br/>
                        URL HERE</p>

                        <p>IMAGE OF CLEARANCE DEBUG FROM ADNC GRAVITY</p>

                    </section>

                    <section>
                        <h2>Boxed JS pathfinding solutions</h2>

                        <p>Not many solutions out there yet. Most are weekend hack projects (not maintained). These are two of the best.</p>

                        <ul>
                            <li><a href="http://www.easystarjs.com/">EasyStar</a></li>
                            <li><a href="http://qiao.github.io/PathFinding.js/visual/">PathFinding.js</a></li>
                        </ul>
                    </section>

                    <section>
                        <h2>More learning resources</h2>

                        <ul>
                            <li>ITEMS EHRE</li>
                        </ul>
                    </section>
                </section>

                <section>
                    <h2>Any Questions?</h2>

                    <ul>
                        <li>Stay in contact: @ashbluewd</li>
                        <li>Get the slides: SHORT_URL_HERE</li>
                    </ul>
                </section>


				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h2>Vertical Slides</h2>
						<p>
							Slides can be nested inside of other slides,
							try pressing <a href="#" class="navigate-down">down</a>.
						</p>
						<a href="#" class="image navigate-down">
							<img width="178" height="238" src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2>Basement Level 1</h2>
						<p>Press down or up to navigate.</p>
					</section>
					<section>
						<h2>Basement Level 2</h2>
						<p>Cornify</p>
						<a class="test" href="http://cornify.com">
							<img width="280" height="326" src="https://s3.amazonaws.com/hakim-static/reveal-js/cornify.gif" alt="Unicorn">
						</a>
					</section>
					<section>
						<h2>Basement Level 3</h2>
						<p>That's it, time to go back up.</p>
						<a href="#/2" class="image">
							<img width="178" height="238" src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Up arrow" style="-webkit-transform: rotate(180deg);">
						</a>
					</section>
				</section>

				<section>
					<h2>Slides</h2>
					<p>
						Not a coder? No problem. There's a fully-featured visual editor for authoring these, try it out at <a href="http://slid.es" target="_blank">http://slid.es</a>.
					</p>
				</section>

				<section>
					<h2>Point of View</h2>
					<p>
						Press <strong>ESC</strong> to enter the slide overview.
					</p>
					<p>
						Hold down alt and click on any element to zoom in on it using <a href="http://lab.hakim.se/zoom-js">zoom.js</a>. Alt + click anywhere to zoom back out.
					</p>
				</section>

				<section>
					<h2>Works in Mobile Safari</h2>
					<p>
						Try it out! You can swipe through the slides and pinch your way to the overview.
					</p>
				</section>

				<section>
					<h2>Marvelous Unordered List</h2>
					<ul>
						<li>No order here</li>
						<li>Or here</li>
						<li>Or here</li>
						<li>Or here</li>
					</ul>
				</section>

				<section>
					<h2>Fantastic Ordered List</h2>
					<ol>
						<li>One is smaller than...</li>
						<li>Two is smaller than...</li>
						<li>Three!</li>
					</ol>
				</section>

				<section data-markdown>
					<script type="text/template">
						## Markdown support

						For those of you who like that sort of thing. Instructions and a bit more info available [here](https://github.com/hakimel/reveal.js#markdown).

						```
						<section data-markdown>
						  ## Markdown support

						  For those of you who like that sort of thing.
						  Instructions and a bit more info available [here](https://github.com/hakimel/reveal.js#markdown).
						</section>
						```
					</script>
				</section>

				<section id="transitions">
					<h2>Transition Styles</h2>
					<p>
						You can select from different transitions, like: <br>
						<a href="?transition=cube#/transitions">Cube</a> -
						<a href="?transition=page#/transitions">Page</a> -
						<a href="?transition=concave#/transitions">Concave</a> -
						<a href="?transition=zoom#/transitions">Zoom</a> -
						<a href="?transition=linear#/transitions">Linear</a> -
						<a href="?transition=fade#/transitions">Fade</a> -
						<a href="?transition=none#/transitions">None</a> -
						<a href="?#/transitions">Default</a>
					</p>
				</section>

				<section id="themes">
					<h2>Themes</h2>
					<p>
						Reveal.js comes with a few themes built in: <br>
						<a href="?#/themes">Default</a> -
						<a href="?theme=sky#/themes">Sky</a> -
						<a href="?theme=beige#/themes">Beige</a> -
						<a href="?theme=simple#/themes">Simple</a> -
						<a href="?theme=serif#/themes">Serif</a> -
						<a href="?theme=night#/themes">Night</a> <br>
						<a href="?theme=moon#/themes">Moon</a> -
						<a href="?theme=solarized#/themes">Solarized</a>
					</p>
					<p>
						<small>
							* Theme demos are loaded after the presentation which leads to flicker. In production you should load your theme in the <code>&lt;head&gt;</code> using a <code>&lt;link&gt;</code>.
						</small>
					</p>
				</section>

				<section>
					<h2>Global State</h2>
					<p>
						Set <code>data-state="something"</code> on a slide and <code>"something"</code>
						will be added as a class to the document element when the slide is open. This lets you
						apply broader style changes, like switching the background.
					</p>
				</section>

				<section data-state="customevent">
					<h2>Custom Events</h2>
					<p>
						Additionally custom events can be triggered on a per slide basis by binding to the <code>data-state</code> name.
					</p>
					<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
Reveal.addEventListener( 'customevent', function() {
	console.log( '"customevent" has fired' );
} );
					</code></pre>
				</section>

				<section>
					<section data-background="#007777">
						<h2>Slide Backgrounds</h2>
						<p>
							Set <code>data-background="#007777"</code> on a slide to change the full page background to the given color. All CSS color formats are supported.
						</p>
						<a href="#" class="image navigate-down">
							<img width="178" height="238" src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png">
						<h2>Image Backgrounds</h2>
						<pre><code>&lt;section data-background="image.png"&gt;</code></pre>
					</section>
					<section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" data-background-repeat="repeat" data-background-size="100px">
						<h2>Repeated Image Backgrounds</h2>
						<pre><code style="word-wrap: break-word;">&lt;section data-background="image.png" data-background-repeat="repeat" data-background-size="100px"&gt;</code></pre>
					</section>
				</section>

				<section data-transition="linear" data-background="#4d7e65" data-background-transition="slide">
					<h2>Background Transitions</h2>
					<p>
						Pass reveal.js the <code>backgroundTransition: 'slide'</code> config argument to make backgrounds slide rather than fade.
					</p>
				</section>

				<section data-transition="linear" data-background="#8c4738" data-background-transition="slide">
					<h2>Background Transition Override</h2>
					<p>
						You can override background transitions per slide by using <code>data-background-transition="slide"</code>.
					</p>
				</section>

				<section>
					<h2>Clever Quotes</h2>
					<p>
						These guys come in two forms, inline: <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;The nice thing about standards is that there are so many to choose from&rdquo;</q> and block:
					</p>
					<blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would
						reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
					</blockquote>
				</section>

				<section>
					<h2>Pretty Code</h2>
					<pre><code data-trim contenteditable>
function linkify( selector ) {
  if( supports3DTransforms ) {

    var nodes = document.querySelectorAll( selector );

    for( var i = 0, len = nodes.length; i &lt; len; i++ ) {
      var node = nodes[i];

      if( !node.className ) {
        node.className += ' roll';
      }
    }
  }
}
					</code></pre>
					<p>Courtesy of <a href="http://softwaremaniacs.org/soft/highlight/en/description/">highlight.js</a>.</p>
				</section>

				<section>
					<h2>Intergalactic Interconnections</h2>
					<p>
						You can link between slides internally,
						<a href="#/2/3">like this</a>.
					</p>
				</section>

				<section>
					<section id="fragments">
						<h2>Fragmented Views</h2>
						<p>Hit the next arrow...</p>
						<p class="fragment">... to step through ...</p>
						<ol>
							<li class="fragment"><code>any type</code></li>
							<li class="fragment"><em>of view</em></li>
							<li class="fragment"><strong>fragments</strong></li>
						</ol>

						<aside class="notes">
							This slide has fragments which are also stepped through in the notes window.
						</aside>
					</section>
					<section>
						<h2>Fragment Styles</h2>
						<p>There's a few styles of fragments, like:</p>
						<p class="fragment grow">grow</p>
						<p class="fragment shrink">shrink</p>
						<p class="fragment roll-in">roll-in</p>
						<p class="fragment fade-out">fade-out</p>
						<p class="fragment highlight-red">highlight-red</p>
						<p class="fragment highlight-green">highlight-green</p>
						<p class="fragment highlight-blue">highlight-blue</p>
						<p class="fragment current-visible">current-visible</p>
						<p class="fragment highlight-current-blue">highlight-current-blue</p>
					</section>
				</section>

				<section>
					<h2>Spectacular image!</h2>
					<a class="image" href="http://lab.hakim.se/meny/" target="_blank">
						<img width="320" height="299" src="http://s3.amazonaws.com/hakim-static/portfolio/images/meny.png" alt="Meny">
					</a>
				</section>

				<section>
					<h2>Export to PDF</h2>
					<p>Presentations can be <a href="https://github.com/hakimel/reveal.js#pdf-export">exported to PDF</a>, below is an example that's been uploaded to SlideShare.</p>
					<iframe id="slideshare" src="http://www.slideshare.net/slideshow/embed_code/13872948" width="455" height="356" style="margin:0;overflow:hidden;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen> </iframe>
					<script>
						document.getElementById('slideshare').attributeName = 'allowfullscreen';
					</script>
				</section>

				<section>
					<h2>Take a Moment</h2>
					<p>
						Press b or period on your keyboard to enter the 'paused' mode. This mode is helpful when you want to take distracting slides off the screen
						during a presentation.
					</p>
				</section>

				<section>
					<h2>Stellar Links</h2>
					<ul>
						<li><a href="http://slid.es">Try the online editor</a></li>
						<li><a href="https://github.com/hakimel/reveal.js">Source code on GitHub</a></li>
						<li><a href="http://twitter.com/hakimel">Follow me on Twitter</a></li>
					</ul>
				</section>

				<section>
					<h1>THE END</h1>
					<h3>BY Hakim El Hattab / hakim.se</h3>
				</section>

			</div>

		</div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
